<!DOCTYPE html>
<html>
<head>
    <title>DICOM Web Converter</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h1>ü©∫ DICOM Web Converter</h1>

        <form id="uploadForm" enctype="multipart/form-data">
            <div class="form-group">
                <label>üìÇ –í—ã–±–µ—Ä–∏—Ç–µ DICOM —Ñ–∞–π–ª—ã:</label>
                <input type="file" name="dicom_files" multiple
                       required class="file-input">
                <small>–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ (.dcm –∏–ª–∏ –±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)</small>
            </div>

            <div class="form-group">
                <label>üéöÔ∏è –ö–æ–Ω—Ç—Ä–∞—Å—Ç:</label>
                <input type="range" name="contrast" min="0.1" max="3.0"
                       step="0.1" value="1.0" class="slider">
                <span id="contrastValue">1.0</span>
            </div>

            <div class="form-group">
                <label>üí° –Ø—Ä–∫–æ—Å—Ç—å (–º–Ω–æ–∂–∏—Ç–µ–ª—å):</label>
                <input type="range" name="brightness" min="0" max="2"
                       step="0.1" value="1.0" class="slider">
                <span id="brightnessValue">1.0</span>
            </div>

            <button type="submit" class="btn btn-primary" id="convertBtn">
                –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
            </button>
        </form>

        <div id="progress" style="display:none; margin-top:20px;">
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
            <p>–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è...</p>
        </div>
    </div>

    <script>
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å–ª–∞–π–¥–µ—Ä–æ–≤
    document.getElementById('contrastValue').textContent =
        document.querySelector('[name="contrast"]').value;

    document.querySelector('[name="contrast"]').addEventListener('input', (e) => {
        document.getElementById('contrastValue').textContent = e.target.value;
    });

    document.getElementById('brightnessValue').textContent =
        document.querySelector('[name="brightness"]').value;

    document.querySelector('[name="brightness"]').addEventListener('input', (e) => {
        document.getElementById('brightnessValue').textContent = e.target.value;
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã
    document.getElementById('uploadForm').addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(e.target);
        const convertBtn = document.getElementById('convertBtn');
        const progress = document.getElementById('progress');

        convertBtn.disabled = true;
        progress.style.display = 'block';

        try {
            const response = await fetch('/convert', {
                method: 'POST',
                body: formData
            });

            const result = await response.json();
            if (result.success) {
                window.location.href = result.redirect;
            } else {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏');
            }
        } catch (error) {
            alert('–û—à–∏–±–∫–∞ —Å–µ—Ç–∏: ' + error.message);
        } finally {
            convertBtn.disabled = false;
            progress.style.display = 'none';
        }
    });
    </script>
<footer style="
    position: fixed;  /* –∏–ª–∏ absolute */
    bottom: 0;
    left: 0;
    right: 0;
    text-align: center;
    padding: 25px;
    background: #2c3e50;
    box-shadow: 0 -4px 12px rgba(0,0,0,0.15);
">
            <div style="color: #ecf0f1; font-weight: 600; font-size: 16px;">
                <span style="color: #1abc9c; font-size: 18px;">üñºÔ∏è</span> DICOM Web Converter
                <span style="color: #7f8c8d;">‚Ä¢</span>
                <a href="https://github.com/TamerLAN42/Dicom-Converter"
                   target="_blank"
                   style="color: #3498db; text-decoration: none; margin: 0 10px;">
                    <span style="font-size: 18px;">üêô</span> GitHub
                </a>
                <span style="color: #7f8c8d;">‚Ä¢</span>
                <span style="color: #bdc3c7;">
                    Forked from
                    <a href="https://github.com/drLacheheb/Dicom-Converter"
                       target="_blank"
                       style="color: #e74c3c; text-decoration: none; font-weight: 700;">
                        @drLacheheb
                    </a>
                </span>
            </div>
</footer>
</body>
</html>